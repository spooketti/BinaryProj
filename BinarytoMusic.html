<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Color to Music</title>
  <style>
    body {
      background-color: rgb(88, 181, 231);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
    }
    .container {
      text-align: center;
      margin-bottom: 30px;
    }
    .square-btn {
      width: 50px;
      height: 50px;
      margin: 10px;
      border: none;
      cursor: pointer;
    }
    #red { background-color: red; }
    #green { background-color: green; }
    #blue { background-color: blue; }
    #yellow { background-color: yellow; }
    #color-compiler {
      width: 300px;
      height: 100px;
      background-color: white;
      display: flex;
      overflow-x: auto;
    }
    #play-btn {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: white;
      border: 2px solid black;
      cursor: pointer;
    }
    h1 {
      color: white;
      font-family: Arial, sans-serif;
    }
  </style>
</head>
<body>
  <h1>Color to Music</h1>
  <div class="container">
    <button id="red" class="square-btn" onclick="addToCompiler('red',1)"></button>
    <button id="green" class="square-btn" onclick="addToCompiler('green',2)"></button>
    <button id="blue" class="square-btn" onclick="addToCompiler('blue',3)"></button>
    <button id="yellow" class="square-btn" onclick="addToCompiler('yellow',4)"></button>
    <div id="color-compiler"></div>
    <button id="play-btn" onclick="colorReading()">Play</button>
  </div>
  <script>
    var music_sequence =[];
    function addToCompiler(color,num) {
      const colorCompiler = document.getElementById('color-compiler');
      const square = document.createElement('div');
      square.style.backgroundColor = color;
      square.style.width = '50px';
      square.style.height = '50px';
      square.style.marginRight = '5px';
      colorCompiler.appendChild(square);
      var color_id = ["01010010 01100101 01100100", "01000010 01101100 01110101 01100101", "01000111 01110010 01100101 01100101 01101110","01011001 01100101 01101100 01101100 01101111 01110111"];
      music_sequence += color_id[num-1];
    }
    async function colorReading(){
      const sequence = music_sequence
        const audio = document.getElementById('audio1');
        for (let i = 0; i < sequence.length; i++) {
          let digit = sequence.charAt(i);
          console.log(digit);
          if (digit === '1') {
            await playAudio(audio);
          }
          await delay(50); // 0.30 second delay
        }
      }
  </script>
  <!-- Binary reader -->
  <label for="sequenceInput">Enter sequence (0s and 1s):</label>
  <input type="text" id="sequenceInput">
  <button onclick="startReading()">Start</button>
  <audio id="audio1" src="binary_beat.mp3"></audio>
  <script>
    function showBinary(element) {
      const binaryText = element.querySelector('.binary-text');
      binaryText.style.display = (binaryText.style.display === 'none' || !binaryText.style.display) ? 'inline' : 'none';
    }
    var audio = document.getElementById("myAudio");
    var playBtn = document.getElementById("playBtn");
    var pauseBtn = document.getElementById("pauseBtn");
    playBtn.addEventListener("click", function() {
      audio.play();
    });
    pauseBtn.addEventListener("click", function() {
    audio.pause();
    });
    async function startReading() {
      const sequence = document.getElementById('sequenceInput').value;
        const audio = document.getElementById('audio1');
        for (let i = 0; i < sequence.length; i++) {
          let digit = sequence.charAt(i);
          console.log(digit);
          if (digit === '1') {
            await playAudio(audio);
          }
          await delay(50); // 0.25 second delay
        }
      }
      function playAudio(audioElement) {
        return new Promise((resolve) => {
          audioElement.play();
          audioElement.onended = () => {
            resolve();
          };
        });
      }
      function delay(ms) {
        return new Promise((resolve) => {
          setTimeout(resolve, ms);
        });
      }
    </script>
  </div>
</body>
</html>
</html>